<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>CCfood - Exploer the best chinese restaurant!</title>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100%; margin: 20px; padding: 40px }
      #searchfd {width: 500px; height: 40px}
      #searchbt {width: 100px; height: 40px}
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDcGiueJDs4Ge_Z2fuXCTEuyRaj-n0L-YQ">
    </script>
    <script type="text/javascript">
      var defPosition = new google.maps.LatLng(38.8808165,-77.102156);
        
      // Resturant list
      var restList = [
        new google.maps.LatLng(38.8689155,-77.1506881);  // Chengduxiaoguan
        new google.maps.LatLng(38.9179158,-76.9706543);  // Sanbei
        new google.maps.LatLng(39.0944188,-77.1537503);  // Taipei Cafe
        new google.maps.LatLng(38.8699734,-77.1452468);  // XO taste
        new google.maps.LatLng(39.1190243,-77.1706429);  // Chuanlaichuanqu
       ];
        
      var markers = [];
      var iterator = 0;

      function drop() {
        for (var i = 0; i < restaurant.length; i++) {
          setTimeout(function() {
            addMarker();
          }, i * 200);
        }
      }

      function addMarker() {
        markers.push(new google.maps.Marker({
          position: restList[iterator],
          map: map,
          draggable: false,
          animation: google.maps.Animation.DROP
        }));
        iterator++;
      }
        
      function initialize() {
        var mapOptions = {
          zoom: 12
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
        //var maker = new google.maps.Marker({position: defPosition,});
        //maker.setMap(map);

        // HTML5 geolocation
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
                                            position.coords.longitude);
            map.setCenter(pos);
            var marker = new google.maps.Marker({
              position: pos, 
              map: map, 
              draggable: true,
              title: 'You are here!'
            });
          },function() {
            handleNoGeolocation(true);
          });
        } else {
          handleNoGeolocation(false);
        }

        drop();
      }

      function handleNoGeolocation(errorFlag) {
        if(errorFlag) {
          var content = 'Error: The geolocation service failed.';
        } else {
          var content = 'Error: Your browser doesn\'t support geolocation.';
        }

        var options = {
          map: map,
          position: defPosition,
          content: content
        };

        var infowindow = new google.maps.InfoWindow(options);
        map.setCenter(options.position);
      }


      google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
    <div id='findrest'>Find a resturant near:</div>
    <div id='location field'>
      <input id="searchfd" type="text" placeholder="Your loaction" />
    </div>
    <input id="searchbt" type="submit" onclick="drop()" value="GO!" />
    <div id="map-canvas"/>
  </body>
</html>